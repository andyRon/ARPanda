èƒ–è¾¾å„¿
---

å‚è€ƒï¼šhttps://www.bilibili.com/video/BV1Bp4y1379L

[å¼€å‘å‰çš„å‡†å¤‡](prepare.md)



èƒ–è¾¾å„¿åŒ…å«ä»é¦–é¡µæµè§ˆå•†å“ï¼Œå•†å“è¯¦æƒ…ï¼Œå¾®ä¿¡ç™»å½•ï¼ŒåŠ å…¥è´­ç‰©è½¦ï¼Œæäº¤è®¢å•ï¼Œå¾®ä¿¡æ”¯ä»˜ï¼Œè®¢å•ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## 1 åŸºç¡€æ¶æ„

```sh
git clone http://git.itcast.cn/heimaqianduan/erabbit-uni-app-vue3-ts.git  panda-shop
```

åœ¨ manifest.json ä¸­æ·»åŠ å¾®ä¿¡å°ç¨‹åºçš„ appid

```
pnpm install   ->   pnpm dev:mp-weixin    ->   å¯¼å…¥å¾®ä¿¡å¼€å‘è€…å·¥å…·
```



### å·¥ç¨‹ç»“æ„è§£æ



```
â”œâ”€â”€ .husky                     # Git Hooks
â”œâ”€â”€ .vscode                    # VS Code æ’ä»¶ + è®¾ç½®
â”œâ”€â”€ dist                       # æ‰“åŒ…æ–‡ä»¶å¤¹ï¼ˆå¯åˆ é™¤é‡æ–°æ‰“åŒ…ï¼‰
â”œâ”€â”€ src                        # æºä»£ç 
â”‚   â”œâ”€â”€ components             # å…¨å±€ç»„ä»¶
â”‚   â”œâ”€â”€ composables            # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ pages                  # ä¸»åŒ…é¡µé¢
â”‚       â”œâ”€â”€ index               # é¦–é¡µ
â”‚       â”œâ”€â”€ category            # åˆ†ç±»é¡µ
â”‚       â”œâ”€â”€ cart                # è´­ç‰©è½¦
â”‚       â”œâ”€â”€ my                  # æˆ‘çš„
â”‚       â””â”€â”€ login               # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ services               # æ‰€æœ‰è¯·æ±‚
â”‚   â”œâ”€â”€ static                 # å­˜æ”¾åº”ç”¨å¼•ç”¨çš„æœ¬åœ°é™æ€èµ„æºçš„ç›®å½•
â”‚       â”œâ”€â”€ images              # æ™®é€šå›¾ç‰‡
â”‚       â””â”€â”€ tabs                # tabBar å›¾ç‰‡
â”‚   â”œâ”€â”€ stores                 # å…¨å±€ pinia store
â”‚       â”œâ”€â”€ modules             # æ¨¡å—
â”‚       â””â”€â”€ index.ts            # store å…¥å£
â”‚   â”œâ”€â”€ styles                 # å…¨å±€æ ·å¼
â”‚       â””â”€â”€ fonts.scss          # å­—ä½“å›¾æ ‡
â”‚   â”œâ”€â”€ types                  # ç±»å‹å£°æ˜æ–‡ä»¶
â”‚       â””â”€â”€ component.d.ts      # å…¨å±€ç»„ä»¶ç±»å‹å£°æ˜
â”‚   â”œâ”€â”€ utils                  # å…¨å±€æ–¹æ³•
â”‚   â”œâ”€â”€ App.vue                # å…¥å£é¡µé¢
â”‚   â”œâ”€â”€ main.ts                # Vueåˆå§‹åŒ–å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ pages.json             # é…ç½®é¡µé¢è·¯ç”±ç­‰é¡µé¢ç±»ä¿¡æ¯
â”‚   â”œâ”€â”€ manifest.json          # é…ç½®appidç­‰æ‰“åŒ…ä¿¡æ¯
â”‚   â””â”€â”€ uni.scss               # uni-app å†…ç½®çš„å¸¸ç”¨æ ·å¼å˜é‡
â”œâ”€â”€ .editorconfig              # editorconfig é…ç½®
â”œâ”€â”€ .eslintrc.cjs              # eslint é…ç½®
â”œâ”€â”€ .prettierrc.json           # prettier é…ç½®
â”œâ”€â”€ .gitignore                 # git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ index.html                 # H5 ç«¯é¦–é¡µ
â”œâ”€â”€ package.json               # package.json ä¾èµ–
â”œâ”€â”€ tsconfig.json              # typescript é…ç½®
â””â”€â”€ vite.config.ts             # vite é…ç½®
```





### å¼•å…¥uni-uiç»„ä»¶åº“

[uni-ui ä»‹ç» | uni-appå®˜ç½‘](https://uniapp.dcloud.net.cn/component/uniui/uni-ui.html)

![](images/image-20240531184530282.png)

å®‰è£…uni-ui

```
pnpm i @dcloudio/uni-ui
```

é€šè¿‡æ­£åˆ™é…ç½®uni-uiçš„ç»„ä»¶è‡ªåŠ¨å¯¼å…¥ï¼š

```json
  // ç»„ä»¶è‡ªåŠ¨å¼•å…¥è§„åˆ™
  "easycom": {
    // æ˜¯å¦å¼€å¯è‡ªåŠ¨æ‰«æï¼Œè‡ªåŠ¨æ‰«æcomponentsç›®å½•ç­‰çœ‹æ˜¯å¦æœ‰ç¬¦åˆuniappçš„ç»„ä»¶
    "autoscan": true,
    // ä»¥æ­£åˆ™æ”¾åˆ°ä»ä¾èµ–åº“ä¸­å¯¼å…¥ç»„ä»¶
    "custom": {
      // uni-ui è§„åˆ™å¦‚ä¸‹é…ç½®
      "^uni-(.*)": "@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue"
    }
  }
```





`@uni-helper/uni-ui-types`ä½œç”¨æ˜¯æä¾›uni-uiç»„ä»¶ç±»å‹ã€‚å®‰è£…ï¼š

```
pnpm i -D @uni-helper/uni-ui-types
```

é…ç½®ï¼š

```json
    "types": [

      "@uni-helper/uni-ui-types"
    ]
```

åŸæœ¬ï¼š

![](images/iShot_2024-05-31_19.09.02.png)

é…ç½®åï¼š

![](images/iShot_2024-05-31_19.11.05.png)

### å°ç¨‹åºç«¯PiniaæŒä¹…åŒ–

çŠ¶æ€ç®¡ç†ï¼špinia

æŒä¹…åŒ–åœ¨ä¸ç½‘é¡µç«¯æœ‰æ‰€ä¸åŒï¼š

```js
// ç½‘é¡µç«¯API
localStorage.setItem()
localStorage.getItem()

// å°ç¨‹åºç«¯API
wx.setStorageSync()
wx.getStorageSync()

// å…¼å®¹å¤šç«¯API
uni.setStorageSync()
uni.getStorageSync()
```

```json
	persist: {
      storage: {
        getItem(key) {
          return uni.getStorageSync(key)
        },
        setItem(key, val) {
          uni.setStorageSync(key, val)
        },
      },
    },
```



å‚æ•°çš„å…·ä½“é…ç½®ï¼Œå¯ä»¥æŸ¥çœ‹æç¤ºä¸­çš„åœ°å€ï¼š

![](images/image-20240531193343486.png)



### æ•°æ®äº¤äº’ï¼ˆè¯·æ±‚å·¥å…·ï¼‰

æ•°æ®äº¤äº’ -> è¯·æ±‚å·¥å…·  -> 1ï¸âƒ£æ‹¦æˆªå™¨ï¼Œ 2ï¸âƒ£è¯·æ±‚å‡½æ•°

#### è¯·æ±‚å’Œä¸Šä¼ æ–‡ä»¶æ‹¦æˆªå™¨

![](images/image-20240531194025307.png)







![](images/image-20240531200759154.png)



#### å°è£…Promiseè¯·æ±‚å‡½æ•°

ç›®çš„æ˜¯ä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„å‘è¯·æ±‚ã€‚å€Ÿé‰´aioxs

![](images/image-20240531202938561.png)



##### è¯·æ±‚æˆåŠŸæå–æ•°æ®å’Œè®¾ç½®ç±»å‹

![](images/image-20240531204836662.png)



##### è·å–æ•°æ®å¤±è´¥

- uni.request çš„ success å›è°ƒå‡½æ•°åªæ˜¯è¡¨ç¤ºæœåŠ¡å™¨**å“åº”æˆåŠŸï¼Œæ²¡å¤„ç†å“åº”çŠ¶æ€ç **ï¼Œä¸šåŠ¡ä¸­ä½¿ç”¨ä¸æ–¹ä¾¿

- axios å‡½æ•°æ˜¯åªæœ‰**å“åº”çŠ¶æ€ç **æ˜¯ 2xx æ‰è°ƒç”¨ **resolve å‡½æ•°ï¼Œè¡¨ç¤ºè·å–æ•°æ®æˆåŠŸ**ï¼Œä¸šåŠ¡ä¸­ä½¿ç”¨æ›´å‡†ç¡®

![](images/image-20240531205320587.png)

![](images/image-20240531205452363.png)





æ¨¡æ‹Ÿç½‘ç»œå¤±è´¥

![](images/image-20240531211457472.png)



## 2 é¦–é¡µæ¨¡å—

![](images/image-20240608192648472.png)

### 2.1 è‡ªå®šä¹‰å¯¼èˆªæ 

1. å‡†å¤‡ç»„ä»¶
2. éšè—é»˜è®¤å¯¼èˆªæ ï¼Œä¿®æ”¹æ–‡å­—é¢œè‰²
3. æ ·å¼é€‚é…-> ==å®‰å…¨åŒºåŸŸ==

![](images/image-20240608204354347.png)





### 2.2 é€šç”¨è½®æ’­ç»„ä»¶

æ€»å…±æœ‰ä¸¤å¤„å¹¿å‘Šä½ï¼Œåˆ†åˆ«ä½äºã€é¦–é¡µã€‘å’Œã€å•†å“åˆ†ç±»é¡µã€‘ã€‚

è½®æ’­å›¾ç»„ä»¶éœ€è¦åœ¨é¦–é¡µå’Œåˆ†ç±»é¡µä½¿ç”¨ï¼Œéœ€è¦å°è£…æˆé€šç”¨ç»„ä»¶ã€‚

1. å‡†å¤‡ç»„ä»¶
2. è‡ªåŠ¨å¯¼å…¥ç»„ä»¶
3. æ·»åŠ ç»„ä»¶ç±»å‹å£°æ˜

![](images/image-20240609010007111.png)

```json
"easycom": {
    // æ˜¯å¦å¼€å¯è‡ªåŠ¨æ‰«æï¼Œè‡ªåŠ¨æ‰«æcomponentsç›®å½•ç­‰çœ‹æ˜¯å¦æœ‰ç¬¦åˆuniappçš„ç»„ä»¶
    "autoscan": true,
    // ä»¥æ­£åˆ™æ”¾åˆ°ä»ä¾èµ–åº“ä¸­å¯¼å…¥ç»„ä»¶
    "custom": {
      // uni-ui è§„åˆ™å¦‚ä¸‹é…ç½®
      "^uni-(.*)": "@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue",
      // åœ¨é€šç”¨ç»„ä»¶æ–‡ä»¶å¤¹ä¸­ï¼ŒæŸ¥æ‰¾ä»¥Pdå¼€å¤´çš„ç»„ä»¶ï¼Œè‡ªåŠ¨å¯¼å…¥(ä¿®æ”¹åéœ€è¦é‡å¯æœåŠ¡å™¨)
      "^Pd(.*)": "@/components/Pd$1.vue"
    }
  }
```

```typescript
import PdSwiper from './PdSwiper.vue'

// å®šä¹‰å…¨å±€ç±»å‹
declare module '@vue/runtime-core' {
  export interface GlobalComponents {
    PdSwiper: typeof PdSwiper
  }
}
```



#### è½®æ’­å›¾æŒ‡ç¤ºç‚¹

![](images/image-20240609011912736.png)

çŸ¥è¯†ç‚¹ï¼š
1. `UniHelper` æä¾›äº‹ä»¶ç±»å‹
2. `ï¼Ÿ`(å¯é€‰é“¾) å…è®¸å‰é¢è¡¨è¾¾å¼ä¸ºç©ºå€¼
3. `ï¼`(éç©ºæ–­è¨€) ä¸»è§‚ä¸Šæ’é™¤æ‰ç©ºå€¼æƒ…å†µ

#### è·å–è½®æ’­å›¾æ•°æ®

1. å°è£…è·å–è½®æ’­å›¾æ•°æ®API
2. é¡µé¢åˆå§‹åŒ–è°ƒç”¨API

```js
// services/home.ts
export const getHomeBannerAPI = (distributionSite = 1) => {
  return http({
    method: 'GET',
    url: '/home/banner',
    data: {
    	distributionSite,
    },
  })
}
```

```js
// pages/index/index.vue
const getHomeBannerData = async () => {
  const res = await getHomeBannerAPI()
  console.log(res)
}
onLoad(() => {
  getHomeBannerData()
})
```



#### å®šä¹‰è½®æ’­å›¾æ•°æ®ç±»å‹å¹¶æ¸²æŸ“

1. å®šä¹‰è½®æ’­å›¾æ•°æ®ç±»å‹  `types/home.d.ts`
2. æŒ‡å®šç±»å‹å¹¶ä¼ å€¼ç»™å­ç»„ä»¶
3. æ¸²æŸ“è½®æ’­å›¾æ•°æ®

![](images/image-20240617000214597.png)

![](images/image-20240617000436180.png)

#### è½®æ’­å›¾æ€»ç»“

![](images/image-20240617164601466.png)



> bug  
>
> `[plugin:uni:mp-using-component] Unexpected token C in JSON at position 33`
>
> è§£å†³æ–¹æ¡ˆï¼šhttps://github.com/dcloudio/uni-app/issues/4952





### 2.3 å‰å°åˆ†ç±»ç»„ä»¶

![](images/image-20240617213730396.png)

1. å‡†å¤‡ç»„ä»¶ï¼ˆåªæœ‰é¦–é¡µä½¿ç”¨ï¼Œå­˜æ”¾åˆ°é¦–é¡µçš„ `components` ï¼Œå–å `CategoryPanel`ï¼‰
2. å¯¼å…¥å¹¶ä½¿ç”¨ç»„ä»¶
3. è®¾ç½®é¦–é¡µåº•è‰²ä¸º  `#F7F7F7`  

å°ç¨‹åºé¡µé¢æ ¹æ ‡ç­¾æ˜¯`<page>`ï¼Œç±»ä¼¼webç§çš„body



#### è·å–å‰å°åˆ†ç±»æ•°æ®

1. å°è£…è·å–å‰å°åˆ†ç±»æ•°æ®API
2. é¡µé¢åˆå§‹åŒ–è°ƒç”¨API

```ts
// services/home.ts
export const getHomeCategoryAPI = () => {
  return http({
    method: 'GET',
    url: '/home/category/mutli',
  })
}
```

```typescript
// pages/index/index.vue
const getHomeCategoryData = async () => {
  const res = await getHomeCategoryAPI()
}
onLoad(() => {
	getHomeCategoryData()
})
```



#### å‰å°åˆ†ç±»æ•°æ®ç±»å‹å¹¶æ¸²æŸ“

1. å®šä¹‰å‰å°åˆ†ç±»æ•°æ®ç±»å‹
2. æŒ‡å®šç±»å‹å¹¶ä¼ å€¼ç»™å­ç»„ä»¶
3. æ¸²æŸ“å‰å°åˆ†ç±»æ•°æ®

![](images/image-20240617221009228.png)



### 2.4 çƒ­é—¨æ¨èç»„ä»¶

1. å‡†å¤‡ç»„ä»¶(åªæœ‰é¦–é¡µä½¿ç”¨)
2. å¯¼å…¥å¹¶ä½¿ç”¨ç»„ä»¶

![](images/image-20240617221335241.png)

#### è·å–çƒ­é—¨æ¨èæ•°æ®

1. å°è£…è·å–çƒ­é—¨æ¨èæ•°æ®API
2. é¡µé¢åˆå§‹åŒ–è°ƒç”¨API

#### çƒ­é—¨æ¨èæ•°æ®ç±»å‹å¹¶æ¸²æŸ“

1. å®šä¹‰çƒ­é—¨æ¨èæ•°æ®ç±»å‹
2. æŒ‡å®šç±»å‹å¹¶ä¼ å€¼ç»™å­ç»„ä»¶
3. æ¸²æŸ“çƒ­é—¨æ¨èæ•°æ®



### 2.5 çŒœä½ å–œæ¬¢ç»„ä»¶â¤ï¸

çŒœä½ å–œæ¬¢åŠŸèƒ½ï¼Œåç«¯æ ¹æ®ç”¨æˆ·çš„æµè§ˆè®°å½•ç­‰ä¿¡æ¯å‘ç”¨æˆ·éšæœºæ¨èçš„ä¸€ç³»åˆ—å•†å“ï¼Œå‰ç«¯è´Ÿè´£æŠŠå•†å“åœ¨**å¤šä¸ªé¡µé¢ä¸­å±•ç¤º**ã€‚

1. å‡†å¤‡ç»„ä»¶(é€šç”¨ç»„ä»¶) `XtxGuess`
2. å®šä¹‰ç»„ä»¶ç±»å‹
3. å‡†å¤‡ scroll-view æ»šåŠ¨å®¹å™¨
4. è®¾ç½® page å’Œ scroll-view æ ·å¼

![](images/image-20240617223553136.png)

scroll viewçš„æ»šåŠ¨åŒºåŸŸï¼š

![](images/image-20240618023616453.png)

p23 8:00 `flex`å±æ€§å¯ä»¥æ™ºèƒ½åœ°åˆ†é…æ»šåŠ¨çš„é«˜åº¦

#### è·å–çŒœä½ å–œæ¬¢æ•°æ®

çŒœä½ å–œæ¬¢ç»„ä»¶åœ¨å¤šä¸ªåœ°æ–¹è°ƒç”¨ï¼Œå› æ­¤ä¸è¦åœ¨é¡µé¢åˆå§‹åŒ–æ—¶è°ƒç”¨ã€‚ç»„ä»¶æŒ‚è½½å®Œåï¼Œè®©ç»„ä»¶è‡ªåŠ¨è°ƒç”¨ä¸€ä¸‹æ•°æ®è·å–ã€‚

1. å°è£…è·å–çŒœä½ å–œæ¬¢æ•°æ®API
2. **ç»„ä»¶æŒ‚è½½å®Œæ¯•**è°ƒç”¨API

ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ä¹‹ä¸€æ˜¯ï¼šâ€œç»„ä»¶æŒ‚è½½å®Œæ¯•â€

![](images/image-20240618025059769.png)



#### çŒœä½ å–œæ¬¢æ•°æ®ç±»å‹å’Œåˆ—è¡¨æ¸²æŸ“

![](images/image-20240618030902752.png)

![](images/image-20240618030940200.png)

#### çŒœä½ å–œæ¬¢åˆ†é¡µå‡†å¤‡

![](images/image-20240618031144815.png)

![](images/image-20240618031157198.png)

![](images/image-20240618113212973.png)

#### çŒœä½ å–œæ¬¢åˆ†é¡µåŠ è½½

![](images/image-20240618113438459.png)

![](images/image-20240618113455720.png)

#### çŒœä½ å–œæ¬¢åˆ†é¡µæ¡ä»¶

![](images/image-20240618113715263.png)

![](images/image-20240618113650128.png)



### 2.6 ä¸‹æ‹‰åˆ·æ–°

![](images/image-20240618120940084.png)

![](images/image-20240618120953391.png)

> ```typescript
>   await getHomeBannerData()
>   await getHomeCategoryData()
>   await getHomeHotData()
> ```
>
> ![](images/image-20240618122406064.png)
>
> è€Œ`await Promise.all([getHomeBannerData(), getHomeCategoryData(), getHomeHotData()])` å¯è®©ä¸‰ä¸ªè¯·æ±‚åŒæ—¶åŠ è½½ï¼Œå‡å°‘åŠ è½½æ—¶é—´
>
> ![](images/image-20240618122258763.png)

#### ä¸‹æ‹‰åˆ·æ–°æ—¶çŒœä½ å–œæ¬¢æ•°æ®è·å–

çŒœä½ å–œæ¬¢ç»„ä»¶æ˜¯ç»„ä»¶å†…å‘èµ·è¯·æ±‚æ•°æ®å¹¶ç»´æŠ¤çš„ã€‚

ä¸‹æ‹‰åˆ·æ–°æ—¶ï¼ŒçŒœä½ å–œæ¬¢ç»„ä»¶éœ€è¦åšï¼š

![](images/image-20240618123632489.png)

![](images/image-20240618123148418.png)

### 2.7 éª¨æ¶å±

éª¨æ¶å±æ˜¯é¡µé¢çš„ä¸€ä¸ªç©ºç™½ç‰ˆæœ¬ï¼Œé€šå¸¸ä¼šåœ¨é¡µé¢å®Œå…¨æ¸²æŸ“ä¹‹å‰ï¼Œé€šè¿‡ä¸€äº›ç°è‰²çš„åŒºå—å¤§è‡´å‹¾å‹’å‡ºè½®å»“ï¼Œå¾…æ•°æ®åŠ è½½å®Œæˆåï¼Œå†æ›¿æ¢æˆçœŸå®çš„å†…å®¹ã€‚

éª¨æ¶å±ä½œç”¨æ˜¯ç¼“è§£ç”¨æˆ·ç­‰å¾…æ—¶çš„ç„¦è™‘æƒ…ç»ªï¼Œå±äºç”¨æˆ·ä½“éªŒä¼˜åŒ–æ–¹æ¡ˆã€‚

![](images/image-20240618123949844.png)

å¾®ä¿¡å¼€å‘è€…å·¥å…·æä¾›äº†è‡ªåŠ¨ç”Ÿæˆéª¨æ¶å±ä»£ç çš„èƒ½åŠ›ã€‚

ä½¿ç”¨æ—¶éœ€è¦æŠŠè‡ªåŠ¨ç”Ÿæˆçš„ `xxx.skeleton.wxml` å’Œ `xxx.skeleton.wxss` å°è£…æˆ `vue` ç»„ä»¶ã€‚ï¼ˆæ‹·è´åˆ°`PageSkeleton.vue`ï¼Œåˆ é™¤ä¸å¿…è¦å¹¶ä¿®æ”¹ï¼‰

![](images/image-20240618124321023.png)

![](images/image-20240618130816825.png)

> bug éª¨æ¶å±ä¸å­˜åœ¨
>
> ```
> Component is not found in path "pages/index/components/PageSkeleton" (using by "pages/index/index")(env: macOS,mp,1.06.2402040; lib: 2.25.3)
> ```



> æ¨èæ¨¡å— + åˆ†ç±»æ¨¡å— + è¯¦æƒ…æ¨¡å—



## 3 æ¨èæ¨¡å—

### 3.1 å‡†å¤‡å·¥ä½œ

![](images/image-20240618210504498.png)

![](images/image-20240618210608921.png)

![](images/image-20240618211139467.png)

### 3.2 è·å–çƒ­é—¨æ¨èæ•°æ®

![](images/image-20240618211246230.png)

å°è£…é€šç”¨æ¥å£ -> åˆå§‹åŒ–è°ƒç”¨

```typescript
// src/services/hot.ts
type HotParams = PageParams & { subType?: string }
export const getHotRecommendAPI = (url: string, data?: HotParams) => {
  return http({
    method: 'GET',
    url,
    data,
  })
}
```

```typescript
// src/pages/hot/hot.vue
// è·å–çƒ­é—¨æ¨èæ•°æ®
const getHotRecommendData = async () => {
  const res = await getHotRecommendAPI(currUrlMap!.url)
  console.log(res)
}
// é¡µé¢åŠ è½½
onLoad(() => {
	getHotRecommendData()
})
```

### 3.3 å®šä¹‰ç±»å‹



ç±»å‹å¤ç”¨

![](images/image-20240618212947129.png)

![](images/image-20240618212511803.png)

### 3.4 æ¸²æŸ“é¡µé¢å’ŒTabäº¤äº’

![](images/image-20240618215138186.png)

### 3.5 åˆ†é¡µåŠ è½½

![](images/image-20240619002209594.png)

### 3.6 åˆ†é¡µæ¡ä»¶

åç«¯æ•°æ®æœ‰é™ï¼Œéœ€è¦ç»™ä¸€ä¸ªæ¡ä»¶åœæ­¢åˆ†é¡µåŠ è½½

![](images/image-20240619003817913.png)



## 4 åˆ†ç±»æ¨¡å—

å•†å“åˆ†ç±»

### å‡†å¤‡å·¥ä½œ

![](images/image-20240619004241577.png)



### æ¸²æŸ“ä¸€çº§åˆ†ç±»å’ŒTabäº¤äº’

![](images/image-20240619011910761.png)

![](images/image-20240619011925363.png)

![](images/image-20240619011935070.png)

![](images/image-20240619011948613.png)

> å¾®ä¿¡å°ç¨‹åºå¼€å‘æŠ€å·§ï¼šæ·»åŠ ç¼–è¯‘æ¨¡å¼-> æŒ‡å®šå¯åŠ¨é¡µé¢
>
> ![](images/image-20240619011729920.png)



### äºŒçº§åˆ†ç±»å’Œå•†å“æ¸²æŸ“

![](images/image-20240619012101068.png)

![](images/image-20240619012421262.png)

### éª¨æ¶å±

![](images/image-20240619013147092.png)





## 5 è¯¦æƒ…æ¨¡å—

### å‡†å¤‡å·¥ä½œ

![](images/image-20240619155205525.png)

```vue
<view class="toolbar" :style="{ paddingBottom: safeAreaInsets?.bottom + 'px' }">
```

ä¸ºäº†é˜²æ­¢ç°åœ¨å…¨é¢å±é¡¶éƒ¨å°é»‘æ¡æŒ¡ä½UI



### é¡µé¢æ¸²æŸ“

![](images/image-20240619155716065.png)

### è½®æ’­å›¾äº¤äº’

![](images/image-20240619160432301.png)



### å¼¹å‡ºå±‚

[uni-popup å¼¹å‡ºå±‚ | uni-appå®˜ç½‘ (dcloud.net.cn)](https://uniapp.dcloud.net.cn/component/uniui/uni-popup.html)

![](images/image-20240619161348330.png)



### å¼¹å‡ºå±‚äº¤äº’

![](images/image-20240619162521090.png)



> ğŸ”–bug
>
> - [ ] å¼¹å‡ºå±‚å…³é—­



### éª¨æ¶å±

ğŸ”–



## 6 ç™»å½•æ¨¡å—

### å°ç¨‹åºå¿«æ·ç™»å½•

#### ä»‹ç»

å¾®ä¿¡å°ç¨‹åºçš„**å¼€æ”¾èƒ½åŠ›**ï¼Œå…è®¸å¼€å‘è€…è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼ˆæ˜µç§°ã€æ€§åˆ«ã€æ‰‹æœºå·ç ç­‰ï¼‰ï¼Œå¼€å‘è€…å¸¸ç”¨æ¥å®ç°æ³¨å†Œ/ç™»å½•çš„åŠŸèƒ½ã€‚

å¸¸è§ç™»å½•/æ³¨å†Œæ–¹å¼ï¼š

1. ç”¨æˆ·å/æ‰‹æœºå· + å¯†ç 
2. æ‰‹æœºå· + éªŒè¯ç 
3. æˆæƒç™»å½•

å®é™…å¼€å‘è¿‡ç¨‹ä¸­å¸¸å¸¸éœ€è¦å®ç°ä»¥ä¸Šçš„ä¸€ç§æˆ–å¤šç§æ–¹å¼ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸»è¦å®ç°**æˆæƒç™»å½•**ï¼ˆå°ç¨‹åºå¿«æ·ç™»å½•ï¼‰ã€‚

**å¾®ä¿¡æˆæƒç™»å½•**å°±æ˜¯ç”¨æˆ·åœ¨ä½¿ç”¨å°ç¨‹åºæ—¶ï¼Œå…¶å®å·²ç™»å½•å¾®ä¿¡ï¼Œå…¶æœ¬è´¨ä¸Šå°±æ˜¯ï¼š**å¾®ä¿¡æˆæƒç»™å°ç¨‹åºè¯»å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯**ã€‚

![å¾®ä¿¡æˆæƒç™»å½•](images/image-20240619163142301.png)

**ä¼ ç»Ÿç™»å½•æ–¹å¼**ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡è¾“å…¥å¯†ç æˆ–è€…æ‰‹æœºéªŒè¯ç å®ç°ç™»å½•ã€‚

![ä¼ ç»Ÿç™»å½•æ–¹å¼](images/image-20240619163231276.png)

#### å®ç°

![](images/image-20240619165047395.png)

![](images/iShot_2024-06-19_16.51.57.png)

å®˜æ–¹æ–‡æ¡£

[è·å–ç™»å½•å‡­è¯(code)](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html)

[è·å–æ‰‹æœºå·](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/getPhoneNumber.html)

![](images/image-20240619165452893.png)

> **æ³¨æ„**: è·å–æ‰‹æœºå·åŠŸèƒ½é’ˆå¯¹**éä¸ªäººå¼€å‘è€…ï¼Œä¸”å®Œæˆè®¤è¯**çš„å°ç¨‹åºå¼€æ”¾ã€‚
>
> **å·¥ä½œåœºæ™¯**ï¼šä½¿ç”¨**ä¼ä¸šå°ç¨‹åºappid** ï¼Œä¸”æŠŠå¾®ä¿¡å·æ·»åŠ åˆ°å¼€å‘è€…åˆ—è¡¨ä¸­ã€‚



### æ¨¡æ‹Ÿå¿«æ·ç™»å½•

```
å°è£…æ¨¡æ‹Ÿç™»å½•  ->  è°ƒç”¨æ¨¡æ‹Ÿç™»å½•
```

![](images/image-20240619165854918.png)

```typescript
/**
 * å°ç¨‹åºç™»å½•_å†…æµ‹ç‰ˆ(æ¨¡æ‹Ÿå¿«æ·ç™»å½•)
 * @param phoneNumber æ¨¡æ‹Ÿæ‰‹æœºå·
 */
export const postLoginWxMinSimpleAPI = (phoneNumber: string) => {
  return http({
    method: 'POST',
    url: '/login/wxMin/simple',
    data: {
      phoneNumber,
    },
  })
}
```

```typescript
// æ¨¡å—æ‰‹æœºå¿«æ·ç™»å½•
const onGetphonenumberSimple = async () => {
  const res = await postLoginWxMinSimpleAPI('13123456789')
  console.log(res)
  uni.showToast({ icon: 'success', title: 'ç™»å½•æˆåŠŸ' })
}
```



### ä¿å­˜ç™»å½•ä¼šå‘˜ä¿¡æ¯

![](images/image-20240619172007565.png)

## 7 ç”¨æˆ·æ¨¡å—

ä¸­æˆ·ï¼ˆä¼šå‘˜ï¼‰ä¸­å¿ƒ

### ä¼šå‘˜ä¿¡æ¯å±•ç¤º

ä¸»è¦å®ç°ä¸¤éƒ¨åˆ†ä¸šåŠ¡ï¼š

1. ä» Store ä¸­è·å–ï¼Œæ¸²æŸ“å½“å‰ç™»å½•ä¼šå‘˜çš„æ˜µç§°å’Œå¤´åƒã€‚
2. çŒœä½ å–œæ¬¢åˆ†é¡µåŠ è½½ï¼Œå¯å°è£…æˆ**ç»„åˆå¼å‡½æ•°**å®ç°å¤ç”¨é€»è¾‘ã€‚

![](images/image-20240620074418333.png)

```
é™æ€ç»“æ„  ->  è‡ªå®šä¹‰å¯¼èˆª  ->  æ¸²æŸ“ä¼šå‘˜ä¿¡æ¯
```



### çŒœä½ å–œæ¬¢ç»„åˆå¼å‡½æ•°

![](images/image-20240620090528829.png)

[ç»„åˆå¼å‡½æ•° | Vue.js (vuejs.org)](https://cn.vuejs.org/guide/reusability/composables.html)ï¼ˆComposablesï¼‰ä¸€ä¸ªåˆ©ç”¨ Vue çš„ç»„åˆå¼ API æ¥å°è£…å’Œå¤ç”¨**æœ‰çŠ¶æ€é€»è¾‘**çš„å‡½æ•°ã€‚

çŒœä½ å–œæ¬¢ç»„åˆå¼å‡½æ•°å®ç°åˆ†é¡µåŠ è½½

```typescript
// src/composables/index.ts
import type { PdGuessInstance } from "@/types/component"
import { ref } from "vue"

export const useGuessList = () => {
  // è·å–çŒœä½ å–œæ¬¢ç»„ä»¶å®ä¾‹
  const guessRef = ref<PdGuessInstance>()
  // æ»šåŠ¨è§¦åº•è·å–åˆ†é¡µæ•°æ®
  const onScrolltolower = () => {
    guessRef.value?.getMore()
  }
  // è¿”å›å°è£…çš„refå’Œå‡½æ•°
  return { guessRef, onScrolltolower }
}
```

```typescript
// è°ƒç”¨çŒœä½ å–œæ¬¢ç»„åˆå¼å‡½æ•°
const { guessRef, onScrolltolower } = useGuessList()

<scroll-view class="viewport" scroll-y enable-back-to-top @scrolltolower="onScrolltolower">

<PdGuess ref="guessRef" />
```

### è®¾ç½®é¡µåˆ†åŒ…å’Œé¢„ä¸‹è½½

**å°ç¨‹åºåˆ†åŒ…**ï¼šå°†å°ç¨‹åºçš„**ä»£ç åˆ†å‰²æˆå¤šä¸ªéƒ¨åˆ†**ï¼Œåˆ†åˆ«æ‰“åŒ…æˆå¤šä¸ªå°ç¨‹åºåŒ…ï¼Œ==å‡å°‘==å°ç¨‹åºçš„==åŠ è½½æ—¶é—´==ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚

**åˆ†åŒ…é¢„ä¸‹è½½**ï¼šåœ¨è¿›å…¥å°ç¨‹åºæŸä¸ªé¡µé¢æ—¶ï¼Œç”±æ¡†æ¶**è‡ªåŠ¨é¢„ä¸‹è½½**å¯èƒ½éœ€è¦çš„åˆ†åŒ…ï¼Œ==æå‡==è¿›å…¥åç»­åˆ†åŒ…é¡µé¢æ—¶çš„==å¯åŠ¨é€Ÿåº¦==ã€‚

![](images/image-20240620094351201.png)

[åˆ†åŒ…é¢„ä¸‹è½½è§„åˆ™](https://uniapp.dcloud.net.cn/collocation/pages.html#preloadrule)

ä¸ºäº†é˜²æ­¢å¹²æ‰°ï¼Œæ–°å»ºæ–‡ä»¶å¤¹`pagesMember`æ¥å­˜æ”¾åˆ†åŒ…

![](images/image-20240620092857369.png)

![](images/image-20240620094118225.png)

> ç»éªŒï¼šåˆ†åŒ…ä¸€èˆ¬æ˜¯æŒ‰ç…§é¡¹ç›®çš„==ä¸šåŠ¡æ¨¡å—åˆ’åˆ†==ï¼Œå¦‚ä¼šå‘˜æ¨¡å—åˆ†åŒ…ï¼ˆä¾‹å¦‚ä¸Šé¢çš„`pagesMember`ï¼‰ï¼Œè®¢å•æ¨¡å—åˆ†åŒ…ç­‰ã€‚

### é€€å‡ºç™»å½•

![](images/image-20240620104205880.png)

### ä¸ªäººä¿¡æ¯é¡µå‡†å¤‡å·¥ä½œ

```
æ–°å»ºåˆ†åŒ…é¡µé¢  ->  é™æ€ç»“æ„  ->  è‡ªå®šä¹‰å¯¼èˆª
```

![](images/image-20240620104535935.png)

### ä¸ªäººä¿¡æ¯å±•ç¤º

```
å°è£…APIæ¥å£ -> åˆå§‹åŒ–è°ƒç”¨ -> å®šä¹‰ç±»å‹ -> é¡µé¢æ¸²æŸ“
```



> æ¸©é¦¨æç¤ºï¼šæ–°æ³¨å†Œçš„ç”¨æˆ·ä¿¡æ¯æ˜¯ç¼ºå¤±çš„ï¼Œä¸ªäººä¿¡æ¯å±•ç¤ºå¯ä½¿ç”¨è´¦å· ï¼Œä¸ªäººä¿¡æ¯ä¿®æ”¹çš„æ—¶å€™æ¢æˆè‡ªå·±æ‰‹æœºå·ã€‚



### ä¿®æ”¹ç”¨æˆ·å¤´åƒ

```
è°ƒç”¨æ‹ç…§ -> é€‰æ‹©å›¾ç‰‡ -> è·å–å›¾ç‰‡è·¯å¾„ -> ä¸Šä¼ æ–‡ä»¶ -> æ›´æ–°å¤´åƒ
```



> æ¸©é¦¨æç¤ºï¼šè°ƒç”¨æ‹ç…§é€‰æ‹©å›¾ç‰‡æ—¶ï¼Œæ¨¡æ‹Ÿå™¨å’Œæ‰‹æœºç«¯æœ‰å·®å¼‚ï¼Œæ¨¡æ‹Ÿå™¨åªèƒ½é€‰æ‹©å›¾ç‰‡ã€‚



### ä¿®æ”¹ç”¨æˆ·æ˜µç§°

p57 

![](images/image-20240620121140938.png)

### æ›´æ–°Storeä¿¡æ¯

![](images/image-20240620122114226.png)

> æ¸©é¦¨æç¤ºï¼šå¦‚æœæ²¡æœ‰å†å²è®°å½•ï¼Œå°±ä¸èƒ½è¿”å›ä¸Šä¸€é¡µã€‚

### ä¿®æ”¹æ€§åˆ«

```
å•é€‰äº‹ä»¶ -> è·å–æ€§åˆ« -> æäº¤æ›´æ–°
```

### ä¿®æ”¹ç”Ÿæ—¥

```
pickeräº‹ä»¶ -> è·å–æ—¥æœŸ -> æäº¤æ›´æ–°
```

### ä¿®æ”¹åŸå¸‚

![](images/image-20240620130624325.png)



### ä¸ªäººä¿¡æ¯é¡µæ€»ç»“

- é™æ€ç»“æ„
  - åˆ†åŒ…
  - è‡ªå®šä¹‰å¯¼èˆª
- ä¸Šä¼ å¤´åƒ
  - æ‹ç…§/é€‰æ‹©å›¾ç‰‡
  - ä¸Šä¼ æ–‡ä»¶
- è¡¨å•
  - input åŒå‘ç»‘å®š
  - radio å•é€‰æŒ‰é’®
  - picker é€‰æ‹©å™¨(æ—¥æœŸ/åŸå¸‚)
- å¤´åƒæ˜µç§°ä¿¡æ¯åŒæ­¥
  - pinia çŠ¶æ€ç®¡ç†



## 8 åœ°å€ç®¡ç†



## 9 SKUæ¨¡å—



## 10 è´­ç‰©è½¦æ¨¡å—



## 11 è®¢å•æ¨¡å—



## é¡¹ç›®æ‰“åŒ…